
# 📈 簡單線性回歸互動模擬器

這是一個使用 Streamlit 建立的互動式網頁應用，旨在視覺化並教學簡單線性回歸的核心概念。使用者可以動態調整參數來生成資料、觀察 OLS (Ordinary Least Squares) 模型的擬合效果，或上傳自己的資料集進行分析。

## ✨ 主要功能

- **互動式參數調整**：透過側邊欄的滑桿和輸入框，即時控制資料生成過程中的真實斜率 (`a`)、截距 (`b`)、雜訊標準差 (`σ`)、資料點數量、X 軸範圍和隨機亂數種子。
- **兩種資料來源**：
  1.  **自動生成**：基於 `y = a·x + b + ε` 模型動態產生資料。
  2.  **CSV 上傳**：支援使用者上傳自訂的 CSV 檔案 (需包含 `x` 和 `y` 欄位)。
- **OLS 閉式解**：採用 `β = (X^T X)^(-1) X^T y` 的 OLS 閉式解進行模型擬合，並即時回報估計的斜率 (`â`) 和截距 (`b̂`)。
- **模型評估指標**：自動計算並顯示均方誤差 (MSE) 和 R² (決定係數)，幫助評估模型效能。
- **豐富的視覺化**：
  - 使用 Plotly 繪製資料散點圖。
  - 在圖上疊加紅色的 **OLS 擬合線**。
  - 若為生成資料，會額外顯示綠色的**真實線**以供對照。
- **資料下載**：提供一鍵下載目前圖上資料為 CSV 檔案的功能。

---

##  CRISP-DM 流程對照

本專案的開發過程遵循了 CRISP-DM (跨行業資料探勘標準流程) 的思想：

### 1. Business Understanding (商業理解)
- **目標**：建立一個教育性質的互動工具，讓非技術背景的使用者也能直觀地理解「線性回歸」中各項參數如何影響模型的擬合結果。
- **需求**：介面需簡單易用，結果需清晰明瞭，且能讓使用者親手操作驗證。

### 2. Data Understanding (資料理解)
- **資料來源**：定義了兩種資料來源—可控制的「模擬資料」與真實世界的「上傳資料」。
- **資料特性**：模擬資料遵循 `y = a·x + b + ε` 的線性關係，其中 `ε` 是服從常態分佈 `𝒩(0, σ²)` 的隨機雜訊。上傳的資料則預期為含有 `x` 和 `y` 欄位的二維資料。

### 3. Data Preparation (資料準備)
- **資料生成**：使用 `numpy` 根據使用者設定的參數來合成 `x` 和 `y` 向量。
- **資料清理/驗證**：對於上傳的 CSV，程式會檢查是否包含必要的 `x` 和 `y` 欄位，若否，則提示錯誤。
- **格式轉換**：將 `x` 資料轉換為包含截距項的設計矩陣 `X = [x, 1]`，以符合 OLS 閉式解的數學要求。

### 4. Modeling (建模)
- **模型選擇**：採用「簡單線性回歸」。
- **演算法**：使用 OLS (普通最小平方法) 的閉式解 `β = (X^T X)^(-1) X^T y` 來直接計算模型參數 `β = [a, b]^T`。
- **實作**：透過 `numpy.linalg.inv` 進行矩陣運算，並繪製擬合線。

### 5. Evaluation (評估)
- **量化指標**：計算 **MSE** (均方誤差) 和 **R²** (決定係數) 來評估模型的擬合優度。
- **視覺化評估**：將原始資料散點、模型擬合線、(若適用)真實關係線繪製在同一張圖上，讓使用者可以直觀比較差異。
- **核心洞察**：使用者可輕易觀察到，當 `noise σ` 越大時，資料點越分散，MSE 會隨之提高，R² 則會降低，顯示模型解釋力變差。

### 6. Deployment (部署)
- **本機部署**：應用程式可透過單一指令 `streamlit run app.py` 在本機電腦上啟動。
- **雲端部署**：
  1. 將專案資料夾上傳到您的 GitHub 儲存庫。
  2. 登入 [Streamlit Community Cloud](https://share.streamlit.io/)。
  3. 點擊 "New app"，並從您的 GitHub 選擇此專案的儲存庫與 `app.py` 檔案。
  4. 點擊 "Deploy!"，Streamlit Cloud 將會自動處理相依套件安裝與部署。
- **線上應用程式網址**：
  - **[前往 Streamlit Community Cloud 上的應用程式](https://hw10926.streamlit.app/)**
- **框架備案**：專案中附帶一個 `flask_skeleton.py`，這是一個最小化的 Flask 應用骨架。若未來需求變更，需要將此邏輯移植到傳統後端框架 (如 Flask 或 Django)，此骨架可作為快速開發的起點。

---

## 🚀 如何在本機執行

1.  **安裝必要的 Python 套件**：
    ```bash
    pip install streamlit pandas numpy scikit-learn plotly
    ```

2.  **啟動 Streamlit 應用**：
    在您的終端機 (Terminal) 中，`cd` 到這個專案的資料夾，然後執行以下指令：
    ```bash
    streamlit run app.py
    ```

3.  您的瀏覽器將會自動開啟一個新分頁，載入此互動應用。

## 參考用的 Flask 骨架

專案內含 `flask_skeleton.py` 檔案，展示了如何用 Flask 建立一個簡單的 Web API。

1.  **安裝 Flask**：
    ```bash
    pip install Flask
    ```

2.  **執行 Flask 應用**：
    ```bash
    python flask_skeleton.py
    ```

3.  應用會在本機的 `http://127.0.0.1:5001` 上運行。

